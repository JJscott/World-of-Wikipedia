---
title:  "Extracting Dates"
authors: [ben]
tags: mddn442 datecoding regex
image:
---

I needed to extract mentions of dates from plain text. Things like "the 21st of February 1999", "the mid-17th century", "since 1895", "in 1066" etc. I wasn't able to find a library that explicitly did what I needed (good support for historical dates), although there are some that deal with things like "yesterday" and "last Tuesday". So, I did what any normal programmer would do: I wrote a regular expression for it.

Things however got quickly out of hand as the number of cases I encountered and accounted for increased. The number of special cases retroactively hacked in to avoid false positives increased too. There are still many cases it does not handle, like lists of dates ("in 34, 27 and 25 BC"). Nonetheless, in the end I created a regex that did approximately what I wanted. Here it is, without further ado, possibly the largest regex you have ever seen:

	(?:\b(?P<intro_1>on)\s*\b(?:\b(?P<month_2>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))\s*(?:the)?\s*(?:\b(?P<day_3>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|[1-9]|[12][0-9]|3[01])(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)(?:\s*day\b)?)\s*,?\s*(?:of)?\s*(?:\b(?:the\s+year)?\s*\b(?:(?P<era_4>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_5>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_6>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))?)|(?:\b(?P<intro_7>on)\s*\b(?:\b(?P<day_8>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|[1-9]|[12][0-9]|3[01])(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)(?:\s*day\b)?)\s*(?:of)?\s*(?:\b(?P<month_9>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))\s*,?\s*(?:of)?\s*(?:\b(?:the\s+year)?\s*\b(?:(?P<era_10>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_11>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_12>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))?)|(?:(?:\b(?P<intro_13>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_14>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:\b(?P<month_15>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))\s*(?:\b(?P<day_16>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|[1-9]|[12][0-9]|3[01])(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)(?:\s*day\b)?)?\s*,?\s*(?:\b(?:the\s+year)?\s*\b(?:(?:(?P<era_17>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))\s*(?P<year_18>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))|(?P<year_19>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_20>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?)))(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))|(?:(?:\b(?P<intro_21>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_22>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:\b(?P<month_23>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))\s*(?:the)?\s*(?:\b(?P<day_24>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|[1-9]|[12][0-9]|3[01])(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)(?:\s*day\b)?)\s*,?\s*(?:of)?\s*(?:\b(?:the\s+year)?\s*\b(?:(?P<era_25>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_26>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_27>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))?)|(?:(?:\b(?P<intro_28>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_29>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:\b(?P<day_30>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|[1-9]|[12][0-9]|3[01])(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)(?:\s*day\b)?)\s*(?:of)?\s*(?:\b(?P<month_31>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))\s*,?\s*(?:of)?\s*(?:\b(?:the\s+year)?\s*\b(?:(?P<era_32>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_33>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_34>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))?)|(?:(?:\b(?P<intro_35>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_36>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:(?:\b(?P<month_37>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))|(?:\b(?P<season_38>summer|autumn|fall|winter|spring)\b))\s*(?:of|in)?\s*(?:\b(?:the\s+year)?\s*\b(?:(?P<era_39>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_40>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_41>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))|(?:(?:\b(?P<intro_42>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_43>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:\b(?:the)?\s*\b(?P<century_44>\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b\s+century\b(?!\s*fox\b)|[1-9][0-9]00\s*s)\s*(?:(?P<era_45>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))|(?:(?:\b(?P<intro_46>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)?\s*\bthe\s+year\s+(?:\b(?:the\s+year)?\s*\b(?:(?P<era_47>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_48>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_49>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))|(?:(?:\b(?P<intro_50>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)\s*(?:(?:\b(?P<month_51>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))|(?:\b(?P<season_52>summer|autumn|fall|winter|spring)\b)|(?:\b(?:the\s+year)?\s*\b(?:(?P<era_53>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_54>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_55>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))|(?:\b(?:the)?\s*\b(?:(?P<era_56>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<decade_57>[1-9][0-9]{0,2}0\s*s)\s*(?:(?P<era_58>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))\s*(?:[\.,\;\:]|\b(?:when|during|before|after|there\s+were|there\s+was|through\s+to|onwards|at\s+the)\b|$))|(?:(?:\b(?P<intro_59>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?|before|after|from|during|late\s+as|early\s+as|at)\b)\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_60>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)\s*(?:(?:\b(?P<month_61>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))|(?:\b(?P<season_62>summer|autumn|fall|winter|spring)\b)|(?:\b(?:the\s+year)?\s*\b(?:(?P<era_63>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_64>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_65>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))|(?:\b(?:the)?\s*\b(?:(?P<era_66>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<decade_67>[1-9][0-9]{0,2}0\s*s)\s*(?:(?P<era_68>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))))|(?:(?:\.|^)\s*\b(?P<intro_69>by|around)\b\s*(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s*(?P<mod_70>(?:early|mid(?:dle)?|late)?\b\s*(?:(?:(?:last|\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty\s*\-?\s*first|(?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b|dying|small)?\b\s*(?:few|\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty|(?:[1-9]|[1-9][0-9]))\b)?\b\s*\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b|beginning|start|end)\s+of)?)(?<=\w)\s*\b(?:\s*\-\s*)?\b)?\s*(?:(?:\b(?P<month_71>january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))|(?:\b(?P<season_72>summer|autumn|fall|winter|spring)\b)|(?:\b(?:the\s+year)?\s*\b(?:(?P<era_73>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<year_74>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))\s*(?:(?P<era_75>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$))|(?:\b(?:the)?\s*\b(?:(?P<era_76>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?\s*(?P<decade_77>[1-9][0-9]{0,2}0\s*s)\s*(?:(?P<era_78>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))?(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)))\s*(?:[,]|\b(?:when|during|before|after|there\s+were|there\s+was|through\s+to|onwards|at\s+the)\b))


Yes, that's 14,009 characters. In the interests of sanity, here's the Python code that produces it:

{% highlight python %}

pattern_date_str = str(
	r'''
	(?: \b (?P<intro>on) \s*\b {month} \s* (?:the)? \s* {day} \s* ,? \s* (?:of)? \s* {year}? ) |
	(?: \b (?P<intro>on) \s*\b {day} \s* (?:of)? \s* {month} \s* ,? \s* (?:of)? \s* {year}? ) |
	(?: {intro}? \s* {mod}? \s* {month} \s* {day}? \s* ,? \s* {year_era} ) |
	(?: {intro}? \s* {mod}? \s* {month} \s* (?:the)? \s* {day} \s* ,? \s* (?:of)? \s* {year}? ) |
	(?: {intro}? \s* {mod}? \s* {day} \s* (?:of)? \s* {month} \s* ,? \s* (?:of)? \s* {year}? ) |
	(?: {intro}? \s* {mod}? \s* (?: {month} | {season} ) \s* (?:of|in)? \s* {year} ) |
	(?: {intro}? \s* {mod}? \s* {century} ) |
	(?: {intro}? \s* \b the \s+ year \s+ {year} ) |
	(?: {intro}  \s* (?: {month} | {season} | {year} | {decade} ) \s* (?: [\.,\;\:] | {connective} | $ ) ) |
	(?: {intro}  \s* {mod} \s* (?: {month} | {season} | {year} | {decade} ) ) |
	(?: (?:\.|^) \s*\b (?P<intro>by|around) \b\s* {mod}? \s* (?: {month} | {season} | {year} | {decade} ) \s* (?: [,] | {connective} ) )
	'''.format(
		intro     = r'(?:\b(?P<intro>in|on|(?:until|since)(?:\s+at\b\s*(?:the)?\b\s*(?:least|most|earliest|latest))?| before|after|from|during|late\s+as|early\s+as|at)\b)',
		mod       = r'(?:\b(?=\w)(?:around)?\b\s*(?:the)?\b\s* (?P<mod>(?:early|mid(?:dle)?|late)? \b\s* (?:(?:(?:last|{ordinal}|dying|small)?\b\s*(?:few|{number})?\b\s*{period}|beginning|start|end)\s+of)?) (?<=\w) \s*\b(?:\s*\-\s*)?\b)',
		day       = r'(?:\b(?P<day>{ordinal}|[1-9]|[12][0-9]|3[01]){wb}(?:\s*day\b)?)',
		month     = r'(?:\b(?P<month>january|february|march|april|may|june|july|august|september|october|november|december| jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b(?!\s+on\b))',
		season    = r'(?:\b(?P<season>summer|autumn|fall|winter|spring)\b)',
		year      = r'(?:\b(?:the\s+year)?\s*\b{era}?\s*{yearno}\s*{era}?{wb})',
		year_era  = r'(?:\b(?:the\s+year)?\s*\b(?:{era}\s*{yearno}|{yearno}\s*{era}){wb})',
		decade    = r'(?:\b(?:the)?\s*\b{era}?\s*(?P<decade>[1-9][0-9]{{0,2}}0\s*s)\s*{era}?{wb})',
		century   = r'(?:\b(?:the)?\s*\b(?P<century>{ordinal}\s+century\b(?!\s*fox\b)|[1-9][0-9]00\s*s)\s*{era}?{wb})',
		connective= r'\b(?:when|during|before|after|there\s+were|there\s+was|through\s+to|onwards|at\s+the)\b'
	).format(
		era       = r'(?:(?P<era>b\.?c\.?|a\.?d\.?|b\.?c\.?e\.?|c\.?e\.?))',
		ordinal   = r'\b(?:first|second|third|fourth|fifth|sixth|seventh|eighth|ninth|tenth| eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth| twenty\s*\-?\s*first| (?:[1-9]|[1-9][0-9])\s*(?:st|nd|rd|th))\b',
		number    = r'\b(?:one|two|three|four|five|six|seven|eight|nine|ten| eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen|twenty| (?:[1-9]|[1-9][0-9]))\b',
		period    = r'\b(?:seconds?|minutes?|hours?|days?|weeks?|months?|years?|decades?|middle|half|halves|quarters?|parts?)\b',
		yearno    = r'(?P<year>(?<!\bat\s)(?<!\bthe\s)[1-9][0-9]{0,3}(?!,[0-9]))',
		wb        = r'(?:(?<=[\s\.,\;\:])(?=\w)|(?<=\w)(?=[\s\.,\;\:])|^(?=\w)|(?<=\w)$)'
	)
)

{% endhighlight %}

Well, nearly. I do a regex-replace through the regex to give otherwise identically-named capture groups unique names, as Python requires them to be unique.

With this, we can extract date matches as well as location matches from Wikipedia articles. Now we have to combine the two.



























